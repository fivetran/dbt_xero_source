[sqlfluff]
templater = dbt
dialect = bigquery

rules = L001
    # removes unnecessary trailing white space; sqlfluff
    , L006 
    # operators should be surrounded by a single white space; sqlfluff
    , L018 
    # WITH closing bracket to be aligned with WITH keyword; sqlfluff
    , L020 
    # Table aliases should be unique within each clause
    , L022 
    # Blank line expected but not found after after CTE ')'; sqlfix
    , L023 
    # Single white space after AS in WITH clause; sqlfluff
    , L032 
    # Prefer specifying join keys instead of using USING; sqlfluff
    , L045 
    # Query defines CTE but does not use it
    , L046 
    # Jinja tags should have single whitespace on either side
    , L058 
    # Nested CASE statements in else flattened; sqlfluff
    , L060 
    # Coalesce instead of IFNULL/NVL; sqlfluff

[sqlfluff:rules]
# requires that all select fields line up by 1 tab or 4 spaces
tab_space_size = 4
indent_unit = tab
max_line_length = 150

# Operator will be placed after newline; sqlfix
[sqlfluff:rules:L007] 
operator_new_lines = after

# Capitalization of keywords; sqlfix
[sqlfluff:rules:L010]
capitalisation_policy: 'lower'

# Aliasing preference for tables; sqlfix
[sqlfluff:rules:L011]
aliasing = explicit

# Aliasing preference for columns
[sqlfluff:rules:L012]
aliasing = explicit

# Require that aggregation functions have an alias
[sqlfluff:rules:L013] 
allow_scalar = False

# Unquoted identifiers; sqlfix
[sqlfluff:rules:L014]
extended_capitalisation_policy = lower
unquoted_identifiers_policy = all 
ignore_words = none

# Line length; sqlfix
[sqlfluff:rules:L016]
ignore_comment_lines = False
ignore_comment_clauses = False

# Keywords should not be used as identifiers.
[sqlfluff:rules:L029]
unquoted_identifiers_policy = all
quoted_identifiers_policy = none

# Capitilization policy for functions; sqlfluff
[sqlfluff:rules:L030]
extended_capitalisation_policy = lower

# Capitilization policy for boolean/nulls; sqlfluff
[sqlfluff:rules:L040]
capitalisation_policy: lower

# Allowing subqueries in FROM or JOIN clauses
[sqlfluff:rules:L042]
forbid_subquery_in = both

# Consistent syntax to count all rows; sqlfluff
[sqlfluff:rules:L047]
prefer_count_1 = False
prefer_count_0 = False

# Fully qualify JOIN clause; sqlfluff 
[sqlfluff:rules:L051]
fully_qualify_join_types = inner

# Semi-colon formatting approach; sqlfluff
[sqlfluff:rules:L052]
multiline_newline = False
require_final_semicolon = False

# GROUP BY/ORDER BY column references
[sqlfluff:rules:L054]
group_by_and_order_by_style = consistent

# Special characters in identifiers
[sqlfluff:rules:L057]
unquoted_identifiers_policy = all
quoted_identifiers_policy = all
allow_space_in_identifier = False
additional_allowed_characters = ""
ignore_words = None

# Policy on quoted and unquoted identifiers; sqlffluff
[sqlfluff:rules:L059]
prefer_quoted_identifiers = False
ignore_words = None

# Comma separated list of blocked words that should not be used
[sqlfluff:rules:L062]
blocked_words = None